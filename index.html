<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SafetyFixs - Professional Automotive Safety & Repair</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .swiper-button-next, .swiper-button-prev {
            color: #F59E0B; /* amber-500 */
        }
        .swiper-pagination-bullet-active {
            background: #F59E0B; /* amber-500 */
        }
        .hero-slide {
            background-size: cover;
            background-position: center;
        }
        /* Custom styles for the grab/grabbing cursor */
        .cursor-grab { cursor: grab; }
        .cursor-grabbing { cursor: grabbing; }

        /* Hide scrollbars for QuantitySpinner for a cleaner look */
        .quantity-spinner-container {
            -ms-overflow-style: none; /* IE and Edge */
            scrollbar-width: none; /* Firefox */
        }
        .quantity-spinner-container::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }

        /* Transition for form background color */
        .form-container {
            transition: background-color 0.5s ease;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800">

    <!-- Header & Navigation -->
    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6 py-3 flex justify-between items-center">
            <a href="#home">
                <img src="https://images.squarespace-cdn.com/content/v1/6642e66aeaeff72f1adc408c/0fe8f795-06e1-40c2-9771-2b4c502873e9/logo+.png?format=1500w" alt="SafetyFixs Logo" class="h-12 md:h-16">
            </a>
            <div class="hidden md:flex space-x-4 lg:space-x-6 items-center">
                <a href="#home" class="text-gray-600 hover:text-amber-600 transition duration-300">Home</a>
                <a href="#about" class="text-gray-600 hover:text-amber-600 transition duration-300">About Us</a>
                <a href="#services" class="text-gray-600 hover:text-amber-600 transition duration-300">Services</a>
                <a href="#contact" class="text-gray-600 hover:text-amber-600 transition duration-300">Contact</a>
                <a href="#dropoff" class="bg-amber-500 text-white px-4 py-2 rounded-md hover:bg-amber-600 transition duration-300 whitespace-nowrap">Drop Off Form</a>
            </div>
            <button id="mobile-menu-button" class="md:hidden flex items-center">
                <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
            </button>
        </nav>
        <!-- Mobile Menu -->
        <div id="mobile-menu" class="hidden md:hidden">
            <a href="#home" class="block py-2 px-4 text-sm hover:bg-gray-200">Home</a>
            <a href="#about" class="block py-2 px-4 text-sm hover:bg-gray-200">About Us</a>
            <a href="#services" class="block py-2 px-4 text-sm hover:bg-gray-200">Services</a>
            <a href="#contact" class="block py-2 px-4 text-sm hover:bg-gray-200">Contact</a>
            <a href="#dropoff" class="block py-2 px-4 text-sm bg-amber-500 text-white">Drop Off Form</a>
        </div>
    </header>

    <main>
        <!-- Hero Section -->
        <section id="home" class="relative h-[70vh] w-full">
             <div class="swiper-container hero-swiper h-full">
                <div class="swiper-wrapper">
                    <div class="swiper-slide hero-slide" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('./img/slide0.5.png');"></div>
                    <div class="swiper-slide hero-slide" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('./img/slide1.png');"></div>
                    <div class="swiper-slide hero-slide" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('./img/slide2.png');"></div>
                    <div class="swiper-slide hero-slide" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('./img/slide2.5.png');"></div>
                </div>
                <!-- Add Pagination -->
                <div class="swiper-pagination"></div>
                <!-- Add Navigation -->
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </div>
            <div class="absolute inset-0 flex items-center justify-center text-center text-white z-10 p-4 pointer-events-none">
                <div>
                    <h1 class="text-3xl sm:text-4xl md:text-6xl font-bold mb-4">Expert Care for Your Vehicle's Safety</h1>
                    <p class="text-base sm:text-lg md:text-xl mb-8 max-w-3xl mx-auto">From ADAS calibration to module programming, we ensure your car's safety systems are flawless.</p>
                    <a href="#services" class="bg-amber-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-amber-600 transition duration-300 pointer-events-auto">Explore Our Services</a>
                </div>
            </div>
        </section>

        <!-- About Us Section -->
        <section id="about" class="py-12 md:py-20 bg-white">
            <div class="container mx-auto px-4 sm:px-6">
                <h2 class="text-3xl font-bold text-center mb-12">About SafetyFixs</h2>
                <div class="flex flex-col md:flex-row items-center gap-8 md:gap-12">
                    <div class="md:w-1/2">
                        <img src="./img/front_business.png" alt="Our Workshop" class="rounded-lg shadow-lg" onerror="this.onerror=null; this.src='https://placehold.co/600x400/E2E8F0/334155?text=Our+Workshop';">
                    </div>
                    <div class="md:w-1/2">
                        <p class="mb-4">SafetyFixs was born from a passion for automotive technology and a commitment to driver safety. Our certified technicians specialize in the intricate systems that keep modern vehicles safe.</p>
                        <p class="mb-4">We use state-of-the-art equipment to diagnose, repair, and calibrate Advanced Driver-Assistance Systems (ADAS), ensuring every feature functions as intended by the manufacturer.</p>
                        <p>Trust us to be your partner in maintaining the long-term safety and reliability of your vehicle.</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- Services Slider Section -->
        <section id="services" class="py-12 md:py-20">
            <div class="container mx-auto px-4 sm:px-6">
                <h2 class="text-3xl font-bold text-center mb-12">Our Services</h2>
                <div class="swiper-container services-swiper relative pb-12">
                    <div class="swiper-wrapper">
                        <!-- Slide 1 -->
                        <div class="swiper-slide bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                            <img src="https://images.squarespace-cdn.com/content/v1/6642e66aeaeff72f1adc408c/d7570233-616a-4c7f-92ba-b6b26fb051e9/image3.2.jpeg?format=1500w" alt="Airbag Repair" class="w-full h-48 object-cover" onerror="this.onerror=null; this.src='https://placehold.co/400x200/cccccc/333333?text=Airbag+Repair';">
                            <div class="p-6 flex-grow">
                                <h3 class="font-bold text-xl mb-4">Airbag Repair</h3>
                                <p>Complete airbag system diagnostics and replacement of deployed airbags to restore your vehicle's safety features.</p>
                            </div>
                        </div>
                        <!-- Slide 2 -->
                        <div class="swiper-slide bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                            <img src="https://images.squarespace-cdn.com/content/v1/6642e66aeaeff72f1adc408c/eddcf3fd-8569-4c33-8dde-6a063f94557a/image5.2.jpeg?format=1500w" alt="SRS Module Service" class="w-full h-48 object-cover" onerror="this.onerror=null; this.src='https://placehold.co/400x200/cccccc/333333?text=SRS+Service';">
                            <div class="p-6 flex-grow">
                                <h3 class="font-bold text-xl mb-4">SRS Module Reset</h3>
                                <p>Expert service for the Supplemental Restraint System, including resetting modules after a collision.</p>
                            </div>
                        </div>
                        <!-- Slide 3 -->
                        <div class="swiper-slide bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                            <img src="https://images.squarespace-cdn.com/content/v1/6642e66aeaeff72f1adc408c/c445f2b8-a85a-47d9-8949-20c45efbfc74/image2.2.jpeg?format=1500w" alt="Seatbelt Repair" class="w-full h-48 object-cover" onerror="this.onerror=null; this.src='https://placehold.co/400x200/cccccc/333333?text=Seatbelt+Repair';">
                            <div class="p-6 flex-grow">
                                <h3 class="font-bold text-xl mb-4">Seatbelt Repair & Replace</h3>
                                <p>Repair of locked or damaged seatbelt retractors and pretensioners, a critical step for post-accident safety.</p>
                            </div>
                        </div>
                        <!-- Slide 4 -->
                        <div class="swiper-slide bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                            <img src="https://placehold.co/400x200/E2E8F0/334155?text=ADAS+Calibration" alt="ADAS Calibration" class="w-full h-48 object-cover">
                            <div class="p-6 flex-grow">
                                <h3 class="font-bold text-xl mb-4">ADAS Calibration</h3>
                                <p>Precise calibration of cameras and sensors for lane-keep assist, adaptive cruise control, and more.</p>
                            </div>
                        </div>
                         <!-- Slide 5 -->
                        <div class="swiper-slide bg-white rounded-lg shadow-lg overflow-hidden flex flex-col">
                            <img src="https://placehold.co/400x200/E2E8F0/334155?text=Module+Programming" alt="Module Programming" class="w-full h-48 object-cover">
                            <div class="p-6 flex-grow">
                                <h3 class="font-bold text-xl mb-4">Module Programming</h3>
                                <p>ECU, BCM, and other control module flashing, programming, and configuration for proper system communication.</p>
                            </div>
                        </div>
                    </div>
                    <!-- Add Pagination -->
                    <div class="swiper-pagination"></div>
                    <!-- Add Navigation -->
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                </div>
            </div>
        </section>

        <!-- Drop Off Form Section -->
        <section id="dropoff" class="py-12 md:py-20 bg-gray-900">
            <div class="container mx-auto px-4 sm:px-6">
                <div class="bg-gray-800 p-6 sm:p-8 rounded-lg shadow-xl w-full max-w-4xl mx-auto border border-gray-700 form-container">
                    <h2 class="text-3xl font-bold text-center mb-4 text-white" >Safety Fix Form</h2>
                    <p id="form-status-message" class="text-center text-green-400 mb-8 hidden"></p>
                    <form id="dropOffForm" class="space-y-6">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                            <!-- Shop Name with Autofill -->
                            <div class="relative">
                                <label for="customerName" class="block text-sm font-medium text-gray-300 mb-1">Shop Name</label>
                                <input type="text" id="customerName" name="customerName" class="mt-1 block w-full px-3 py-2 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm bg-gray-700 text-gray-200" required autocomplete="off" />
                                <ul id="customerNameSuggestions" class="absolute z-20 w-full bg-gray-700 border border-gray-600 rounded-md mt-1 max-h-48 overflow-y-auto shadow-lg hidden"></ul>
                            </div>
                             <!-- Phone # -->
                            <div>
                                <label for="phoneNumber" class="block text-sm font-medium text-gray-300 mb-1">Phone #</label>
                                <input type="tel" id="phoneNumber" name="phoneNumber" class="mt-1 block w-full px-3 py-2 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm bg-gray-700 text-gray-200" required placeholder="e.g., 801-123-4567" maxlength="12" />
                                <p id="phoneNumberError" class="mt-1 text-sm text-red-400 hidden"></p>
                            </div>
                        </div>
                        
                        <!-- What will you drop off? -->
                        <div>
                            <label for="dropOffType" class="block text-sm font-medium text-gray-300 mb-1">What will you drop off?</label>
                            <select id="dropOffType" name="dropOffType" class="mt-1 block w-full px-3 py-2 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm bg-gray-700 text-gray-200" required>
                                <option value="">Select an option</option>
                                <option value="vehicle">Vehicle</option>
                                <option value="part">Part</option>
                            </select>
                        </div>

                        <!-- Conditional Fields for Vehicle -->
                        <div id="vehicleDetails" class="space-y-6 p-4 bg-gray-700 rounded-md border border-gray-600 hidden">
                            <h3 class="text-lg font-semibold text-gray-200">Vehicle Details</h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
                                <div>
                                    <label class="block text-sm font-medium text-gray-300 mb-1">Year</label>
                                    <div id="vehicleYearSpinner" class="relative w-full flex items-center justify-center px-3 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-gray-200 text-lg font-semibold cursor-grab select-none quantity-spinner-container" data-value="2024" data-min="1991" data-max="2026">2024</div>
                                </div>
                                <div class="relative">
                                    <label for="vehicleMake" class="block text-sm font-medium text-gray-300 mb-1">Make</label>
                                    <input type="text" id="vehicleMake" name="vehicleMake" class="mt-1 block w-full px-3 py-2 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm bg-gray-700 text-gray-200" placeholder="e.g., Honda" autocomplete="off" />
                                    <ul id="vehicleMakeSuggestions" class="absolute z-20 w-full bg-gray-700 border border-gray-600 rounded-md mt-1 max-h-48 overflow-y-auto shadow-lg hidden"></ul>
                                </div>
                                <div class="relative">
                                    <label for="vehicleModel" class="block text-sm font-medium text-gray-300 mb-1">Model</label>
                                    <input type="text" id="vehicleModel" name="vehicleModel" class="mt-1 block w-full px-3 py-2 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm bg-gray-700 text-gray-200" placeholder="e.g., Civic" autocomplete="off" disabled />
                                    <ul id="vehicleModelSuggestions" class="absolute z-20 w-full bg-gray-700 border border-gray-600 rounded-md mt-1 max-h-48 overflow-y-auto shadow-lg hidden"></ul>
                                </div>
                            </div>
                            <div class="sm:col-span-2 md:col-span-3">
                                <label for="additionalNotes" class="block text-sm font-medium text-gray-300 mb-1">Additional Notes</label>
                                <textarea id="additionalNotes" name="additionalNotes" rows="3" class="mt-1 block w-full px-3 py-2 border border-gray-600 rounded-md shadow-sm focus:outline-none focus:ring-orange-500 focus:border-orange-500 sm:text-sm bg-gray-700 text-gray-200"></textarea>
                            </div>
                        </div>

                        <!-- Conditional Fields for Part -->
                        <div id="partDetails" class="space-y-4 p-4 bg-gray-700 rounded-md border border-gray-600 hidden">
                            <h3 class="text-lg font-semibold text-gray-200">Part Details (Quantities)</h3>
                            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-5 gap-6">
                                <div class="flex items-center justify-between"><label class="block text-sm font-medium text-gray-300">Module(s)</label><div id="moduleSpinner" class="relative w-24 flex items-center justify-center px-3 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-gray-200 text-lg font-semibold cursor-grab select-none quantity-spinner-container" data-value="0" data-min="0" data-max="20">0</div></div>
                                <div class="flex items-center justify-between"><label class="block text-sm font-medium text-gray-300">Single Stage</label><div id="singleStageSpinner" class="relative w-24 flex items-center justify-center px-3 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-gray-200 text-lg font-semibold cursor-grab select-none quantity-spinner-container" data-value="0" data-min="0" data-max="20">0</div></div>
                                <div class="flex items-center justify-between"><label class="block text-sm font-medium text-gray-300">Dual Stage</label><div id="dualStageSpinner" class="relative w-24 flex items-center justify-center px-3 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-gray-200 text-lg font-semibold cursor-grab select-none quantity-spinner-container" data-value="0" data-min="0" data-max="20">0</div></div>
                                <div class="flex items-center justify-between"><label class="block text-sm font-medium text-gray-300">Triple Stage</label><div id="threeStageSpinner" class="relative w-24 flex items-center justify-center px-3 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-gray-200 text-lg font-semibold cursor-grab select-none quantity-spinner-container" data-value="0" data-min="0" data-max="20">0</div></div>
                                <div class="flex items-center justify-between"><label class="block text-sm font-medium text-gray-300">Buckles</label><div id="buckleSpinner" class="relative w-24 flex items-center justify-center px-3 py-2 border border-gray-600 rounded-md shadow-sm bg-gray-700 text-gray-200 text-lg font-semibold cursor-grab select-none quantity-spinner-container" data-value="0" data-min="0" data-max="20">0</div></div>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-orange-500 hover:bg-orange-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-orange-500 transition duration-150 ease-in-out">Submit</button>
                    </form>
                </div>
            </div>
        </section>
        
        <!-- Contact Section -->
        <section id="contact" class="py-12 md:py-20 bg-gray-800 text-white">
            <div class="container mx-auto px-4 sm:px-6 text-center">
                <h2 class="text-3xl font-bold mb-6">Contact Us</h2>
                <p class="mb-2">Phone: (801) 472-1909</p>
                <p class="mb-2">Email: costumers819@gmail.com</p>
                <p>Address: 92 N 1200 W, Orem, Utah 84057</p>
            </div>
        </section>

    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-6">
        <div class="container mx-auto px-4 sm:px-6 text-center">
            <div class="flex justify-center mb-4">
                <a href="https://www.instagram.com/safetyfixmodule/" target="_blank" rel="noopener noreferrer" class="text-gray-400 hover:text-white">
                    <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true">
                        <path fill-rule="evenodd" d="M12.315 2c-4.04.004-4.503.018-6.08.087C4.601 2.157 3.63 2.383 2.913 3.1c-.717.717-.943 1.688-1.012 3.218C1.833 7.897 1.82 8.356 1.818 12.315c-.003 4.04.01 4.504.079 6.08.07 1.53.295 2.5.988 3.193.717.717 1.688.943 3.218 1.012 1.578.068 2.04.082 6.08.078 4.04-.004 4.503-.018 6.08-.087 1.53-.07 2.5-.295 3.193-.988.717-.717.943-1.688 1.012-3.218.068-1.577.082-2.04.078-6.08-.004-4.04-.018-4.503-.087-6.08-.07-1.53-.295-2.5-.988-3.193-.717-.717-1.688-.943-3.218-1.012C16.818 2.018 16.36 2.004 12.315 2zm0 1.802c3.96 0 4.38.015 5.91.082.996.045 1.504.248 1.857.594.4.4.602.91.648 1.857.067 1.53.08 1.95.08 5.91s-.013 4.38-.08 5.91c-.046.948-.248 1.456-.648 1.857-.4.4-.91.602-1.857.648-1.53.067-1.95.08-5.91.08s-4.38-.013-5.91-.08c-.948-.046-1.456-.248-1.857-.648-.4-.4-.602-.91-.648-1.857-.067-1.53-.08-1.95-.08-5.91s.013-4.38.08-5.91c.046-.948.248-1.456.648-1.857.353-.346.86-.55 1.857-.594C7.935 3.817 8.355 3.802 12.315 3.802zM12 7.38a4.62 4.62 0 100 9.24 4.62 4.62 0 000-9.24zm0 7.438a2.818 2.818 0 110-5.636 2.818 2.818 0 010 5.636zm6.405-7.84a1.08 1.08 0 100-2.16 1.08 1.08 0 000 2.16z" clip-rule="evenodd" />
                    </svg>
                </a>
            </div>
            <p>&copy; 2025 SafetyFixs. All Rights Reserved.</p>
        </div>
    </footer>

    <script>
    // --- START: Original Site Script ---
    // Mobile menu toggle
    const mobileMenuButton = document.getElementById('mobile-menu-button');
    const mobileMenu = document.getElementById('mobile-menu');
    mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
    });

    // Initialize Swiper for services slider
    var servicesSwiper = new Swiper('.services-swiper', {
        slidesPerView: 1,
        spaceBetween: 30,
        loop: true,
        pagination: {
            el: '.services-swiper .swiper-pagination',
            clickable: true,
        },
        navigation: {
            nextEl: '.services-swiper .swiper-button-next',
            prevEl: '.services-swiper .swiper-button-prev',
        },
        breakpoints: {
            768: { slidesPerView: 2, spaceBetween: 40 },
            1024: { slidesPerView: 3, spaceBetween: 50 }
        }
    });
    
    // Initialize Swiper for hero slider
    var heroSwiper = new Swiper('.hero-swiper', {
        loop: true,
        autoplay: {
            delay: 5000,
            disableOnInteraction: false,
        },
        effect: 'fade',
        navigation: {
            nextEl: '.hero-swiper .swiper-button-next',
            prevEl: '.hero-swiper .swiper-button-prev',
        },
        pagination: {
            el: '.hero-swiper .swiper-pagination',
            clickable: true,
        },
    });

    // Smooth scrolling for navigation links
    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
            e.preventDefault();
            const targetElement = document.querySelector(this.getAttribute('href'));
            if (targetElement) {
                targetElement.scrollIntoView({ behavior: 'smooth' });
            }
        });
    });
    // --- END: Original Site Script ---


    // --- START: Integrated Drop Off Form Script ---
    document.addEventListener('DOMContentLoaded', () => {
        
        const mockClients = [
            { name: 'Momentum Auto Motors', phoneNumber: '8018045364' },
            { name: '313 Motors', phoneNumber: '' }, 
            { name: '801 LA Auto', phoneNumber: '' }, 
            { name: 'A And Auto Sales', phoneNumber: '' }, 
            { name: 'A&A Auto Sales', phoneNumber: '' }, 
            { name: 'Aaron Rimamela', phoneNumber: '' }, 
            { name: 'Aaron Rimamenic', phoneNumber: '' }, 
            { name: 'AC Performance', phoneNumber: '9735365722' }, 
            { name: 'Ace Auto Utah', phoneNumber: '8015800538' }, 
            { name: 'Ace Collision', phoneNumber: '' }, 
            { name: 'Action Auto', phoneNumber: '8018824962' }, 
            { name: 'Adventure Aitomotive', phoneNumber: '' }, 
            { name: 'Alberto', phoneNumber: '' }, 
            { name: 'Alex', phoneNumber: '' }, 
            { name: 'Alex Ortiz', phoneNumber: '' }, 
            { name: 'Alexis', phoneNumber: '' }, 
            { name: 'Ali ToyZ', phoneNumber: '' }, 
            { name: 'Amc Auto Inc', phoneNumber: '' }, 
            { name: 'Andres Moronda', phoneNumber: '' }, 
            { name: 'Andy', phoneNumber: '' }, 
            { name: 'Anthony', phoneNumber: '' }, 
            { name: 'Apex', phoneNumber: '' }, 
            { name: 'Apex Motors', phoneNumber: '8014273255' }, 
            { name: 'Armando Cardenas', phoneNumber: '' }, 
            { name: 'Arthur', phoneNumber: '' }, 
            { name: 'Arturo', phoneNumber: '' }, 
            { name: 'Asays Auto', phoneNumber: '' }, 
            { name: 'Assai Auto', phoneNumber: '' }, 
            { name: 'Assai Auto Llc', phoneNumber: '' }, 
            { name: 'Aurelio', phoneNumber: '' }, 
            { name: 'Aut Deal Spot Llc', phoneNumber: '' }, 
            { name: 'Auto 360', phoneNumber: '8017225954' }, 
            { name: 'Auto Club', phoneNumber: '' }, 
            { name: 'Auto Fit Llc', phoneNumber: '' }, 
            { name: 'Auto Market', phoneNumber: '' }, 
            { name: 'Auto Match', phoneNumber: '3854185323' }, 
            { name: 'Auto Near Me', phoneNumber: '' }, 
            { name: 'Auto Net', phoneNumber: '' }, 
            { name: 'Auto Premiun', phoneNumber: '' }, 
            { name: 'Auto Racing Llc', phoneNumber: '' }, 
            { name: 'Automarket', phoneNumber: '' }, 
            { name: 'Automax', phoneNumber: '' }, 
            { name: 'Autoplace', phoneNumber: '8017351915' }, 
            { name: 'Avanesyan Motors', phoneNumber: '' }, 
            { name: 'Baja Auto Sales', phoneNumber: '' }, 
            { name: 'Bebote', phoneNumber: '' }, 
            { name: 'Beehive Auto Sale', phoneNumber: '' }, 
            { name: 'Best Buy Auto', phoneNumber: '' }, 
            { name: 'Beto El Mecanico', phoneNumber: '' }, 
            { name: 'e Auto Sale', phoneNumber: '3853549757' }, 
            { name: 'Pro Guys Auto', phoneNumber: '' }, 
            { name: 'Quality Multiservice', phoneNumber: '' }, 
            { name: 'Rafael Chaidez', phoneNumber: '' }, 
            { name: 'Randall ', phoneNumber: '' }, 
            { name: 'Raul', phoneNumber: '' }, 
            { name: 'Raul Mecanico ', phoneNumber: '' }, 
            { name: 'Real Automotive', phoneNumber: '' }, 
            { name: 'Reality Auto', phoneNumber: '' }, 
            { name: 'Red Autorebuilders Or LHM Collision', phoneNumber: '3853359812' }, 
            { name: 'Red Line Auto Sale', phoneNumber: '' }, 
            { name: 'Redline Auto Sale', phoneNumber: '' }, 
            { name: 'RedRock Collision', phoneNumber: '' }, 
            { name: 'Revanew Motor Sports', phoneNumber: '8013183351' }, 
            { name: 'Revolution Auto', phoneNumber: '' }, 
            { name: 'Rocky Mountain Collision', phoneNumber: '' }, 
            { name: 'Rocky Mountain Diesel', phoneNumber: '' }, 
            { name: 'Rokys Auto', phoneNumber: '' }, 
            { name: 'Roniel Zaleta', phoneNumber: '' }, 
            { name: 'Roniel Zuleta', phoneNumber: '' }, 
            { name: 'Ross Jardine', phoneNumber: '' }, 
            { name: 'RSG Motors', phoneNumber: '' }, 
            { name: 'RVD Motors Lehi', phoneNumber: '' }, 
            { name: 'S & R Auto Sales', phoneNumber: '8016916797' }, 
            { name: 'S&L Automotive', phoneNumber: '8017940442' }, 
            { name: 'S&R Auto', phoneNumber: '' }, 
            { name: 'Saint Auto', phoneNumber: '' }, 
            { name: 'Salt Lake Bumper', phoneNumber: '8012059066' }, 
            { name: 'Samurai ', phoneNumber: '' }, 
            { name: 'Sandpiper', phoneNumber: '' }, 
            { name: 'Scott Jasper', phoneNumber: '' }, 
            { name: 'Secure Auto Group', phoneNumber: '' }, 
            { name: 'Select Auto', phoneNumber: '8016231369' }, 
            { name: 'Sencion Performance', phoneNumber: '8016230483' }, 
            { name: 'Shahbaz Highland Motors', phoneNumber: '' }, 
            { name: 'Sharkon Auto', phoneNumber: '' }, 
            { name: 'Sharp Cars', phoneNumber: '8017094994' }, 
            { name: 'Smart Choice', phoneNumber: '' }, 
            { name: 'South Valley', phoneNumber: '' }, 
            { name: 'Spectrum Auto Sales', phoneNumber: '' }, 
            { name: 'Spurs Auto Sales', phoneNumber: '' }, 
            { name: 'SR Prime', phoneNumber: '8014' }
        ];

        const mockVehicles = {
        
            models: {
                'Acura': ['ILX', 'Integra', 'MDX', 'NSX', 'RDX', 'TLX'],
                'Alfa Romeo': ['Giulia', 'Stelvio', 'Tonale'],
                'Audi': ['A3', 'A4', 'A5', 'A6', 'A7', 'A8', 'e-tron', 'e-tron GT', 'Q3', 'Q4 e-tron', 'Q5', 'Q7', 'Q8', 'R8', 'TT'],
                'Bentley': ['Bentayga', 'Continental GT', 'Flying Spur'],
                'BMW': ['2 Series', '3 Series', '4 Series', '5 Series', '7 Series', '8 Series', 'i3', 'i4', 'i7', 'iX', 'X1', 'X2', 'X3', 'X4', 'X5', 'X6', 'X7', 'Z4'],
                'Bugatti': ['Chiron', 'Divo', 'Veyron'],
                'Buick': ['Enclave', 'Encore', 'Encore GX', 'Envista', 'Envision', 'LaCrosse', 'Regal'],
                'Cadillac': ['CT4', 'CT5', 'CT6', 'Escalade', 'Escalade ESV', 'Lyriq', 'XT4', 'XT5', 'XT6'],
                'Chevrolet': ['Blazer', 'Bolt EUV', 'Bolt EV', 'Camaro', 'Colorado', 'Corvette', 'Cruze', 'Equinox', 'Express', 'Impala', 'Malibu', 'Silverado 1500', 'Silverado 2500HD', 'Silverado 3500HD', 'Sonic', 'Suburban', 'Tahoe', 'Trailblazer', 'Traverse', 'Trax'],
                'Chrysler': ['300', 'Pacifica', 'Voyager'],
                'Dodge': ['Challenger', 'Charger', 'Durango', 'Grand Caravan', 'Hornet', 'Journey'],
                'Ferrari': ['296', '812', 'F8', 'Portofino M', 'Purosangue', 'Roma', 'SF90'],
                'Fiat': ['124 Spider', '500', '500L', '500X'],
                'Fisker': ['Ocean'],
                'Ford': ['Bronco', 'Bronco Sport', 'E-Transit', 'EcoSport', 'Edge', 'Escape', 'Expedition', 'Explorer', 'F-150', 'F-250', 'F-350', 'F-450', 'Fiesta', 'Focus', 'Fusion', 'Maverick', 'Mustang', 'Mustang Mach-E', 'Ranger', 'Transit', 'Transit Connect'],
                'GMC': ['Acadia', 'Canyon', 'Hummer EV', 'Savana', 'Sierra 1500', 'Sierra 2500HD', 'Sierra 3500HD', 'Terrain', 'Yukon', 'Yukon XL'],
                'Genesis': ['G70', 'G80', 'G90', 'GV60', 'GV70', 'GV80'],
                'Honda': ['Accord', 'Civic', 'CR-V', 'Fit', 'HR-V', 'Insight', 'Odyssey', 'Passport', 'Pilot', 'Prologue', 'Ridgeline'],
                'Hyundai': ['Accent', 'Elantra', 'Ioniq 5', 'Ioniq 6', 'Kona', 'Nexo', 'Palisade', 'Santa Cruz', 'Santa Fe', 'Sonata', 'Tucson', 'Veloster', 'Venue'],
                'Infiniti': ['Q50', 'Q60', 'QX50', 'QX55', 'QX60', 'QX80'],
                'Jaguar': ['E-Pace', 'F-Pace', 'F-Type', 'I-Pace', 'XE', 'XF', 'XJ'],
                'Jeep': ['Cherokee', 'Compass', 'Gladiator', 'Grand Cherokee', 'Grand Cherokee L', 'Grand Wagoneer', 'Renegade', 'Wagoneer', 'Wrangler'],
                'Kia': ['Carnival', 'EV6', 'EV9', 'Forte', 'K5', 'K900', 'Niro', 'Optima', 'Rio', 'Seltos', 'Sorento', 'Soul', 'Sportage', 'Stinger', 'Telluride'],
                'Lamborghini': ['Aventador', 'Countach', 'Huracan', 'Revuelto', 'Urus'],
                'Land Rover': ['Defender', 'Discovery', 'Discovery Sport', 'Range Rover', 'Range Rover Evoque', 'Range Rover Sport', 'Range Rover Velar'],
                'Lexus': ['ES', 'GS', 'GX', 'IS', 'LC', 'LS', 'LX', 'NX', 'RC', 'RX', 'RZ', 'TX', 'UX'],
                'Lincoln': ['Aviator', 'Continental', 'Corsair', 'MKZ', 'Nautilus', 'Navigator'],
                'Lucid': ['Air', 'Gravity'],
                'Maserati': ['Ghibli', 'GranTurismo', 'Grecale', 'Levante', 'MC20', 'Quattroporte'],
                'Mazda': ['CX-30', 'CX-5', 'CX-50', 'CX-9', 'CX-90', 'Mazda3', 'Mazda6', 'MX-30', 'MX-5 Miata'],
                'McLaren': ['720S', '750S', 'Artura', 'GT'],
                'Mercedes-Benz': ['A-Class', 'AMG GT', 'C-Class', 'CLA', 'CLE', 'CLS', 'E-Class', 'EQB', 'EQE', 'EQS', 'GLA', 'GLB', 'GLC', 'GLE', 'GLS', 'Metris', 'S-Class', 'SL', 'Sprinter'],
                'Mini': ['Clubman', 'Convertible', 'Countryman', 'Hardtop'],
                'Mitsubishi': ['Eclipse Cross', 'Mirage', 'Outlander', 'Outlander Sport'],
                'Nissan': ['Altima', 'Armada', 'Ariya', 'Frontier', 'GT-R', 'Kicks', 'Leaf', 'Maxima', 'Murano', 'NV200', 'Pathfinder', 'Rogue', 'Sentra', 'Titan', 'Versa', 'Z'],
                'Polestar': ['Polestar 1', 'Polestar 2', 'Polestar 3'],
                'Porsche': ['718 Boxster', '718 Cayman', '911', 'Cayenne', 'Macan', 'Panamera', 'Taycan'],
                'Ram': ['1500', '2500', '3500', 'ProMaster', 'ProMaster City'],
                'Rivian': ['R1S', 'R1T'],
                'Rolls-Royce': ['Cullinan', 'Ghost', 'Phantom', 'Spectre'],
                'Subaru': ['Ascent', 'BRZ', 'Crosstrek', 'Forester', 'Impreza', 'Legacy', 'Outback', 'Solterra', 'WRX'],
                'Tesla': ['Cybertruck', 'Model 3', 'Model S', 'Model X', 'Model Y', 'Roadster'],
                'Toyota': ['4Runner', '86', 'Avalon', 'bZ4X', 'Camry', 'C-HR', 'Corolla', 'Corolla Cross', 'Crown', 'Grand Highlander', 'Highlander', 'Land Cruiser', 'Prius', 'RAV4', 'Sequoia', 'Sienna', 'Supra', 'Tacoma', 'Tundra', 'Venza', 'Yaris'],
                'Volkswagen': ['Arteon', 'Atlas', 'Golf GTI', 'Golf R', 'ID.4', 'Jetta', 'Passat', 'Taos', 'Tiguan'],
                'Volvo': ['C40', 'EX30', 'EX90', 'S60', 'S90', 'V60', 'V90', 'XC40', 'XC60', 'XC90']
            }
        };

        // --- DOM Elements ---
        const dropOffForm = document.getElementById('dropOffForm');
        if (!dropOffForm) return;

        const customerNameInput = document.getElementById('customerName');
        const customerSuggestionsList = document.getElementById('customerNameSuggestions');
        const phoneNumberInput = document.getElementById('phoneNumber');
        const phoneNumberError = document.getElementById('phoneNumberError');
        const dropOffTypeSelect = document.getElementById('dropOffType');
        const vehicleDetailsDiv = document.getElementById('vehicleDetails');
        const partDetailsDiv = document.getElementById('partDetails');
        const vehicleYearSpinner = document.getElementById('vehicleYearSpinner');
        const vehicleMakeInput = document.getElementById('vehicleMake');
        const makeSuggestionsList = document.getElementById('vehicleMakeSuggestions');
        const vehicleModelInput = document.getElementById('vehicleModel');
        const modelSuggestionsList = document.getElementById('vehicleModelSuggestions');
        const singleStageSpinner = document.getElementById('singleStageSpinner');
        const dualStageSpinner = document.getElementById('dualStageSpinner');
        const threeStageSpinner = document.getElementById('threeStageSpinner');
        const buckleSpinner = document.getElementById('buckleSpinner');
        const moduleSpinner = document.getElementById('moduleSpinner');

        // --- Helper Functions ---
        function formatPhoneNumber(value) {
            if (!value) return value;
            const phoneNumber = value.replace(/\D/g, '');
            if (phoneNumber.length > 10) phoneNumber = phoneNumber.slice(0, 10);
            const phoneNumberLength = phoneNumber.length;
            if (phoneNumberLength < 4) return phoneNumber;
            if (phoneNumberLength < 7) return `${phoneNumber.slice(0, 3)}-${phoneNumber.slice(3)}`;
            return `${phoneNumber.slice(0, 3)}-${phoneNumber.slice(3, 6)}-${phoneNumber.slice(6, 10)}`;
        }

        function validatePhoneNumber(number) {
            const cleanedNumber = number.replace(/\D/g, '');
            if (cleanedNumber.length > 0 && cleanedNumber.length !== 10) return 'Phone number must be 10 digits.';
            return '';
        }
        
        function showNotification(message, isError = false) {
            const formContainer = dropOffForm.parentElement;
            const formStatusMessage = document.getElementById('form-status-message');
            if (!formContainer || !formStatusMessage) return;

            // Clear previous states
            formContainer.classList.remove('bg-green-900', 'bg-red-900');
            formStatusMessage.classList.remove('text-green-400', 'text-red-400');
            
            if (isError) {
                formContainer.classList.add('bg-red-900');
                formStatusMessage.classList.add('text-red-400');
            } else {
                formContainer.classList.add('bg-green-900');
                formStatusMessage.classList.add('text-green-400');
            }

            formStatusMessage.textContent = message;
            formStatusMessage.classList.remove('hidden');

            setTimeout(() => {
                formContainer.classList.remove('bg-green-900', 'bg-red-900');
                formStatusMessage.classList.add('hidden');
            }, 4000);
        }
        
        function updateSpinnerValue(spinnerElement, newValue) {
            if(!spinnerElement) return;
            const min = parseInt(spinnerElement.dataset.min, 10);
            const max = parseInt(spinnerElement.dataset.max, 10);
            const clampedValue = Math.max(min, Math.min(max, newValue));
            spinnerElement.dataset.value = clampedValue;
            spinnerElement.innerHTML = `${clampedValue}
                <div class="absolute right-1 top-1/2 -translate-y-1/2 flex flex-col space-y-0.5">
                    <button type="button" class="text-gray-400 hover:text-gray-200 text-xs leading-none" data-action="increment">&#9650;</button>
                    <button type="button" class="text-gray-400 hover:text-gray-200 text-xs leading-none" data-action="decrement">&#9660;</button>
                </div>`;
        }

        function renderSuggestions(ulElement, suggestions, onClickHandler, displayKey = '') {
            ulElement.innerHTML = '';
            if (suggestions.length === 0) {
                ulElement.classList.add('hidden');
                return;
            }
            suggestions.forEach(item => {
                const li = document.createElement('li');
                li.className = 'px-3 py-2 cursor-pointer text-gray-200 hover:bg-gray-600 rounded-md';
                li.textContent = displayKey ? item[displayKey] : item;
                li.addEventListener('mousedown', (e) => {
                    e.preventDefault();
                    onClickHandler(item);
                });
                ulElement.appendChild(li);
            });
            ulElement.classList.remove('hidden');
        }
        
        function updateConditionalFields() {
            const type = dropOffTypeSelect.value;
            vehicleDetailsDiv.classList.toggle('hidden', type !== 'vehicle');
            partDetailsDiv.classList.toggle('hidden', type !== 'part');
        }

        // --- Event Handlers ---
        function handleInputChange(e) {
            const { name, value } = e.target;
            if (name === 'phoneNumber') {
                const formattedValue = formatPhoneNumber(value);
                e.target.value = formattedValue;
                const error = validatePhoneNumber(value);
                phoneNumberError.textContent = error;
                phoneNumberError.classList.toggle('hidden', !error);
            } else if (name === 'customerName') {
                const suggestions = value.length > 1 ? mockClients.filter(c => c.name.toLowerCase().includes(value.toLowerCase())) : [];
                renderSuggestions(customerSuggestionsList, suggestions, handleCustomerSuggestionClick, 'name');
            } else if (name === 'vehicleMake') {
                vehicleModelInput.disabled = !value;
                vehicleModelInput.value = '';
                // ================== FIX IS HERE ==================
                const suggestions = value.length > 0 ? Object.keys(mockVehicles.models).filter(m => m.toLowerCase().includes(value.toLowerCase())) : [];
                // ===============================================
                renderSuggestions(makeSuggestionsList, suggestions, handleMakeSuggestionClick);
            } else if (name === 'vehicleModel') {
                const availableModels = mockVehicles.models[vehicleMakeInput.value] || [];
                const suggestions = value.length > 0 ? availableModels.filter(m => m.toLowerCase().includes(value.toLowerCase())) : [];
                renderSuggestions(modelSuggestionsList, suggestions, handleModelSuggestionClick);
            }
        }

        function handleCustomerSuggestionClick(client) {
            customerNameInput.value = client.name;
            const formattedPhone = formatPhoneNumber(client.phoneNumber);
            phoneNumberInput.value = formattedPhone;
            customerSuggestionsList.classList.add('hidden');
            phoneNumberError.classList.add('hidden');
        }

        function handleMakeSuggestionClick(make) {
            vehicleMakeInput.value = make;
            vehicleModelInput.disabled = false;
            vehicleModelInput.value = '';
            makeSuggestionsList.classList.add('hidden');
            vehicleModelInput.focus();
        }

        function handleModelSuggestionClick(model) {
            vehicleModelInput.value = model;
            modelSuggestionsList.classList.add('hidden');
        }
        
        let isDragging = false, startY = 0, startValue = 0, currentSpinner = null;
        function handleSpinnerInteraction(e) {
            const spinner = e.currentTarget;
            if (e.target.closest('button')) {
                const action = e.target.closest('button').dataset.action;
                let currentValue = parseInt(spinner.dataset.value, 10);
                const newValue = action === 'increment' ? currentValue + 1 : currentValue - 1;
                updateSpinnerValue(spinner, newValue);
                e.stopPropagation();
                return;
            }
            if (e.type === 'mousedown' || e.type === 'touchstart') {
                isDragging = true;
                startY = e.type === 'touchstart' ? e.touches[0].clientY : e.clientY;
                startValue = parseInt(spinner.dataset.value, 10);
                currentSpinner = spinner;
                spinner.classList.add('cursor-grabbing');
                e.preventDefault();
            }
        }
        
        function handleSpinnerMove(e) {
            if (!isDragging || !currentSpinner) return;
            const currentY = e.type === 'touchmove' ? e.touches[0].clientY : e.clientY;
            const diffY = startY - currentY;
            const change = Math.floor(diffY / 15);
            updateSpinnerValue(currentSpinner, startValue + change);
        }

        function handleSpinnerEnd() {
            if (isDragging && currentSpinner) currentSpinner.classList.remove('cursor-grabbing');
            isDragging = false;
            currentSpinner = null;
        }

        // --- Event Listeners Initialization ---
        dropOffForm.addEventListener('input', handleInputChange);
        dropOffTypeSelect.addEventListener('change', updateConditionalFields);

        [customerNameInput, vehicleMakeInput, vehicleModelInput].forEach(input => {
            input.addEventListener('blur', () => setTimeout(() => {
                const suggestionsList = document.getElementById(input.id + 'Suggestions');
                if (suggestionsList) suggestionsList.classList.add('hidden');
            }, 150));
        });

        [vehicleYearSpinner, singleStageSpinner, dualStageSpinner, threeStageSpinner, buckleSpinner, moduleSpinner].forEach(spinner => {
            if (spinner) {
                spinner.addEventListener('mousedown', handleSpinnerInteraction);
                spinner.addEventListener('touchstart', handleSpinnerInteraction, { passive: false });
            }
        });
        window.addEventListener('mousemove', handleSpinnerMove);
        window.addEventListener('touchmove', handleSpinnerMove, { passive: false });
        window.addEventListener('mouseup', handleSpinnerEnd);
        window.addEventListener('touchend', handleSpinnerEnd);
        
        [vehicleYearSpinner, singleStageSpinner, dualStageSpinner, threeStageSpinner, buckleSpinner, moduleSpinner].forEach(spinner => {
            if(spinner) updateSpinnerValue(spinner, parseInt(spinner.dataset.value, 10));
        });

        dropOffForm.addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const formData = new FormData(dropOffForm);
            const data = Object.fromEntries(formData.entries());

            data.vehicleYear = vehicleYearSpinner.dataset.value;
            data.moduleCount = moduleSpinner.dataset.value;
            data.singleStageCount = singleStageSpinner.dataset.value;
            data.dualStageCount = dualStageSpinner.dataset.value;
            data.threeStageCount = threeStageSpinner.dataset.value;
            data.buckleCount = buckleSpinner.dataset.value;

            try {
                const response = await fetch('/api/submit', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(data),
                });

                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                
                showNotification('Form submitted successfully!');
                dropOffForm.reset();
                updateConditionalFields();
                [vehicleYearSpinner, singleStageSpinner, dualStageSpinner, threeStageSpinner, buckleSpinner, moduleSpinner].forEach(spinner => {
                    if(spinner) {
                        const initialValue = spinner.id === 'vehicleYearSpinner' ? 2024 : 0;
                        updateSpinnerValue(spinner, initialValue);
                    }
                });

            } catch (error) {
                console.error('Error submitting form:', error);
                showNotification('Error submitting form. Please try again.', true);
            }
        });
        
        updateConditionalFields();
    });
    // --- END: Integrated Drop Off Form Script ---
</script>

</body>
</html>

